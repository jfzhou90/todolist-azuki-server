(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(t,e,n){t.exports=n(210)},114:function(t,e,n){},207:function(t,e){},210:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(21),o=n(16),i=n(17),c=n(15),u={auth:{isLoading:!0},socket:null,modals:{},errors:[],lists:{keyOrder:[],keyHash:{}},tasks:{activeTasks:[],completedTasks:[],keyHash:{}},visibility:"active",apiStatus:{isLoading:!0}},l="BEGIN_API_CALL",p="END_API_CALL",d="LOADING_USER_COMPLETE",f="GET_USER_SUCCESS",h="ADD_SOCKET",m="OPEN_MODAL",b="REORDER_LIST",k="GET_LIST_SUCCESS",v="ADD_LIST_SUCCESS",y="UPDATE_LIST_SUCCESS",E="DELETE_LIST_SUCCESS",g="GET_TASK_SUCCESS",O="ADD_TASK_SUCCESS",j="TOGGLE_TASK_SUCCESS",w="CLEAR_TASKS_SUCCESS",T="ADD_SUBTASK_SUCCESS",C="DELETE_SUBTASK_SUCCESS",S="UPDATE_VISIBILITY";var A=n(101),N=function(t){var e=t.sort(function(t,e){return t.order-e.order}).map(function(t){return t.id}),n={};return t.forEach(function(t){return n[t.id]=t}),{keyOrder:e,keyHash:n}},L=function(t,e){var n=Object(c.a)({},t);return n.keyOrder.push(e.id),n.keyHash[e.id]=e,n},x=function(t){var e=t.filter(function(t){return!t.isCompleted}).sort(function(t,e){return t.order-e.order}).map(function(t){return t.id}),n=t.filter(function(t){return t.isCompleted}).sort(function(t,e){return t.order-e.order}).map(function(t){return t.id}),a={};return t.forEach(function(t){Array.isArray(t.subtasks)&&(t.subtasks=N(t.subtasks)),a[t.id]=t}),{activeTasks:e,completedTasks:n,keyHash:a}},M=function(t,e){var n=Object(c.a)({},t);n.activeTasks=[].concat(Object(A.a)(n.activeTasks),[e.id]);var a=e.subtasks?e.subtasks:[];return e.subtasks=N(a),n.keyHash[e.id]=e,n},I=function(t,e){var n={},a=e.subtasks.map(function(t){return t.id});e.subtasks.forEach(function(t){n[t.id]=t}),e.subtasks={keyOrder:a,keyHash:n};var r=Object.values(t.keyHash).map(function(t){return t.id===e.id?e:t});return x(r)},D=function(t,e){var n=Object(c.a)({},t);return n.keyHash[e.TaskId].subtasks.keyOrder.push(e.id),n.keyHash[e.TaskId].subtasks.keyHash[e.id]=e,n},U=function(t,e){var n=Object(c.a)({},t);return n.keyHash[e.taskId].subtasks.keyOrder=n.keyHash[e.taskId].subtasks.keyOrder.filter(function(t){return t!==e.id}),n};var _=n(29);var P=n(28),R=Object(i.c)({auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.auth,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return{isLoading:!1};case f:return Object(c.a)({},e.data,{isLoading:!1});default:return t}},sidebar:P.reducer,modals:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.lists;var t,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case m:return t={},Object(_.a)(t,e.payload.modalName,!0),Object(_.a)(t,"data",e.payload.data),t;default:return{}}},lists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.lists,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:case E:case k:return N(e.data);case v:return L(t,e.data);case b:return Object(c.a)({},t,{keyOrder:e.data});default:return t}},socket:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.socket,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h:return e.data;default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.tasks,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case w:case g:return x(e.data);case O:return M(t,e.data);case j:return I(t,e.data);case T:return D(t,e.data);case C:return U(t,e.data);default:return t}},visibility:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.visibility,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S:return e.visibility;default:return t}},apiStatus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.apiStatus;switch((arguments.length>1?arguments[1]:void 0).type){case l:return{isLoading:!0};case p:return{isLoading:!1};default:return t}}}),H=n(89),J=n(6),F=(n(114),n(7)),B=n(8),K=n(10),z=n(9),G=n(11),V=n(24),Z=n(3),W=n.n(Z),q=n(5),Y=function(){return fetch("/auth/currentUserAndList").then(function(t){if(t&&t.ok)return t.json();throw new Error("Could not retrieve user.")})},Q=n(90),X=n.n(Q),$=function(){return r.a.createElement("div",{className:"loading--div-container"},r.a.createElement("img",{className:"loading--img-loading",src:X.a,alt:"Loading..."}))},tt=n(91),et=n.n(tt),nt=function(){return r.a.createElement("div",{className:"login--div-full"},r.a.createElement("div",{className:"login--div-container"},r.a.createElement("img",{className:"login--img-logo",src:et.a,alt:"Beans"}),r.a.createElement("span",{className:"login--span-title"},"Azuki"),r.a.createElement("span",{className:"login--span-intro"},"Login With"),r.a.createElement("a",{className:"login--a-provider",href:"/auth/google"},r.a.createElement("i",{className:"fab fa-google"})," ",r.a.createElement("span",{style:{color:"#4285F4"}},"G"),r.a.createElement("span",{style:{color:"#DB4437"}},"o"),r.a.createElement("span",{style:{color:"#F4B400"}},"o"),r.a.createElement("span",{style:{color:"#4285F4"}},"g"),r.a.createElement("span",{style:{color:"#0F9D58"}},"l"),r.a.createElement("span",{style:{color:"#DB4437"}},"e"))))},at=function(t){return r.a.createElement("div",{className:""},"NOTFOUND")},rt=(n(117),n(12)),st=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).toggleMenu=function(){n.props.dispatch(Object(P.action)(!n.props.sidebar.isOpen))},n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return console.log("Header Rendered"),r.a.createElement("div",{className:"header--div-container"},r.a.createElement("div",{className:"header--div-left"},r.a.createElement("i",{className:"header--i-burger fa fa-bars",onClick:this.toggleMenu})),r.a.createElement("div",{className:"header--div-mid"},r.a.createElement(o.b,{to:"/"},r.a.createElement("h1",{className:"header--h1-title"},"A Z U K I"))),r.a.createElement("div",{className:"header--div-right"},r.a.createElement("img",{className:"header--img-profile",src:this.props.auth.img,alt:"profile"}),r.a.createElement("div",{className:"header--profile-name"}," ",this.props.auth.name.split(" ")[0]," "),r.a.createElement("a",{href:"/auth/logout"},"Logout")))}}]),e}(a.Component),ot=Object(J.connect)(function(t){return{dispatch:t.dispatch,auth:t.auth,sidebar:t.sidebar}})(st),it=n(93),ct=function(t){return r.a.createElement("div",{className:"sidebar--div-addListContainer"},r.a.createElement("button",{onClick:function(){return t.toggleModal()}},"Add New List"))},ut=n(23),lt=function(t){return r.a.createElement("div",{className:t.location===t.item.id?"list--div-container-selected":"list--div-container"},r.a.createElement(o.b,{to:"/list/".concat(t.item.id)},r.a.createElement("span",{className:"list--span-name"},t.item.name)),r.a.createElement("div",{className:"list--div-buttonContainer"},r.a.createElement("button",{className:"fas fa-edit",onClick:function(){return t.onEdit()}}),r.a.createElement("button",{className:"fas fa-trash",onClick:function(){return t.onDelete()}})))},pt=function(t,e){return function(){var n=Object(q.a)(W.a.mark(function n(a){return W.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a({type:m,payload:{modalName:t,data:e}});case 1:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()},dt=function(){return function(){var t=Object(q.a)(W.a.mark(function t(e){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"CLOSE_MODAL"});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ft=function(t){return fetch("/api/list/createList",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t})}).then(function(t){if(t.ok){var e=t.json();return console.log(e),e}})},ht=function(t,e){return fetch("/api/list/reorderList",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(t){t.ok&&e&&e.emit("updating","list")})},mt=function(t){return fetch("/api/list/".concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t})}).then(function(t){return t.ok?t.json():void 0})},bt=function(t,e){return fetch("/api/list/updateListFields",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t,name:e})}).then(function(t){return t.ok?t.json():void 0})},kt=function(t){return function(){var e=Object(q.a)(W.a.mark(function e(n){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n({type:S,visibility:t});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},vt=n(102),yt=function(t,e,n){var a=t.splice(e,1),r=Object(vt.a)(a,1)[0];return t.splice(n,0,r),t},Et=n(43),gt=n.n(Et),Ot=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).state={location:null},n.updateListsOrder=function(t){if(t.destination){var e=yt(n.props.lists.keyOrder,t.source.index,t.destination.index);n.props.reorderList(e),n._reorderList(e)}},n._reorderList=gt()(function(t){ht(t,n.props.socket)},2e3),n.deleteList=function(t){n.props.openModal("deleteListModal",t)},n.editList=function(t){n.props.openModal("editListModal",t)},n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.socket&&this.props.socket.on("list",function(){return t.props.getList()})}},{key:"componentWillUnmount",value:function(){this.props.socket&&this.props.socket.off("list")}},{key:"componentDidUpdate",value:function(){var t=window.location.href.split("/").pop();this.state.location!==t&&this.setState({location:t})}},{key:"render",value:function(){var t=this;return console.log("DraggableList rendered"),r.a.createElement("div",null,r.a.createElement(ut.a,{onDragEnd:this.updateListsOrder},r.a.createElement(ut.c,{droppableId:"droppableList"},function(e){return r.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,className:"Droppable--div-listContainer"}),t.props.lists.keyOrder.map(function(e,n){return r.a.createElement(ut.b,{key:e,index:n,draggableId:e},function(n){return r.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps),r.a.createElement(lt,{location:t.state.location,item:t.props.lists.keyHash[e],onDelete:function(){return t.deleteList(t.props.lists.keyHash[e])},onEdit:function(){return t.editList(t.props.lists.keyHash[e])}}))})}),e.placeholder)})))}}]),e}(a.Component),jt={openModal:pt,reorderList:function(t){return function(){var e=Object(q.a)(W.a.mark(function e(n){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n({type:b,data:t});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},getList:function(){return function(){var t=Object(q.a)(W.a.mark(function t(e){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Y().then(function(t){t&&e({type:k,data:t.list})}).catch(function(t){console.log(t)}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},updateVisibility:kt},wt=Object(J.connect)(function(t){return{lists:t.lists,socket:t.socket,sidebar:t.sidebar}},jt)(Ot),Tt=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).toggleAddModal=function(){n.props.openModal("addModal")},n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"shouldComponentUpdate",value:function(t){return t.sidebar.isOpen!==this.props.sidebar.isOpen}},{key:"render",value:function(){return console.log("Sidebar Rendered"),r.a.createElement("div",null,r.a.createElement(it.slide,{noOverlay:!0,isOpen:this.props.sidebar.isOpen,width:"300px",disableAutoFocus:!0,customCrossIcon:!1,customBurgerIcon:!1},r.a.createElement(ct,{toggleModal:this.toggleAddModal}),r.a.createElement(wt,null)))}}]),e}(a.Component),Ct={openModal:pt},St=Object(J.connect)(function(t){return{sidebar:t.sidebar}},Ct)(Tt),At=n(22),Nt=n.n(At),Lt={overlay:{zIndex:"2000"},content:{top:"43%",bottom:"40%",left:"30%",right:"30%",borderRadius:"20px"}},xt={top:"10%",bottom:"auto",left:"10%",right:"10%",borderRadius:"20px"},Mt=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).onSubmit=function(){var t=Object(q.a)(W.a.mark(function t(e){var a;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!(void 0===(a=n.refs.addListInput.value)||null===a||0===a.length||a.length>16)&&a.match(/[a-zA-Z0-9]/g)){t.next=4;break}return t.abrupt("return",rt.b.error("Must be 1-16 character long."));case 4:return t.next=6,n.props.addNewList(a,n.props.socket);case 6:rt.b.success("".concat(a," has been added.")),n.props.closeModal();case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"render",value:function(){var t=this;return console.log("AddModal rendered"),r.a.createElement(Nt.a,{isOpen:this.props.isOpen,onRequestClose:this.props.closeModal,shouldCloseOnOverlayClick:!0,style:window.screen.width>500?Lt:Object(c.a)({},Lt,{content:xt})},r.a.createElement("form",{className:"AddListModal--div-container",onSubmit:function(e){return t.onSubmit(e)}},r.a.createElement("h1",null,"Enter the title of the new list:"),r.a.createElement("input",{type:"text",ref:"addListInput",autoFocus:!0}),r.a.createElement("div",{className:"AddListModal--div-buttonContainer"},r.a.createElement("button",{type:"button",onClick:function(){return t.props.closeModal()}},"Cancel"),r.a.createElement("button",{type:"submit"},"Save"))))}}]),e}(a.PureComponent),It={closeModal:dt,addNewList:function(t,e){return function(){var n=Object(q.a)(W.a.mark(function n(a){return W.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",ft(t).then(function(t){t&&(a({type:v,data:t}),e&&e.emit("updating","list"))}).catch(function(t){console.log(t)}));case 1:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()}},Dt=Object(J.connect)(function(t){return{socket:t.socket}},It)(Mt),Ut={overlay:{zIndex:"2000"},content:{top:"43%",bottom:"40%",left:"30%",right:"30%",borderRadius:"20px"}},_t={top:"43%",bottom:"auto",left:"10%",right:"10%",borderRadius:"20px"},Pt=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).onDelete=function(t){rt.b.info("".concat(t," has been deleted")),n.props.onDelete(),n.props.closeModal()},n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(Nt.a,{isOpen:this.props.isOpen,onRequestClose:this.props.closeModal,shouldCloseOnOverlayClick:!0,style:window.screen.width>500?Ut:Object(c.a)({},Ut,{content:_t})},r.a.createElement("div",{className:"deleteItem--div-container"},r.a.createElement("h1",null,"Are you sure you want to delete"),r.a.createElement("strong",null,this.props.data,"?"),r.a.createElement("div",{className:"deleteItem--div-button-container"},r.a.createElement("button",{onClick:function(){return t.onDelete(t.props.data)}},"Delete"),r.a.createElement("button",{onClick:this.props.closeModal},"Cancel"))))}}]),e}(a.PureComponent),Rt={closeModal:dt},Ht=Object(J.connect)(null,Rt)(Pt),Jt={overlay:{zIndex:"2000"},content:{top:"43%",bottom:"40%",left:"30%",right:"30%",borderRadius:"20px"}},Ft={top:"10%",bottom:"auto",left:"10%",right:"10%",borderRadius:"20px"},Bt=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).onSubmit=function(){var t=Object(q.a)(W.a.mark(function t(e){var a;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),a=n.refs.editListInput.value,n.props.data!==a){t.next=4;break}return t.abrupt("return",n.props.closeModal());case 4:if(!(void 0===a||null===a||0===a.length||a.length>16)){t.next=6;break}return t.abrupt("return",rt.b.error("Must be 1-16 character long."));case 6:return t.next=8,n.props.onEdit(a);case 8:rt.b.success("".concat(n.props.data," has been renamed to ").concat(a,".")),n.props.closeModal();case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"render",value:function(){var t=this;return console.log("EditListModal rendered"),r.a.createElement(Nt.a,{isOpen:this.props.isOpen,onRequestClose:this.props.closeModal,shouldCloseOnOverlayClick:!0,style:window.screen.width>500?Jt:Object(c.a)({},Jt,{content:Ft})},r.a.createElement("form",{className:"AddListModal--div-container",onSubmit:function(e){return t.onSubmit(e)}},r.a.createElement("h1",null,"Rename ",r.a.createElement("strong",null,this.props.data)," to?"),r.a.createElement("input",{type:"text",ref:"editListInput",autoFocus:!0,defaultValue:this.props.data}),r.a.createElement("div",{className:"AddListModal--div-buttonContainer"},r.a.createElement("button",{type:"submit"},"Save"),r.a.createElement("button",{type:"button",onClick:function(){return t.props.closeModal()}},"Cancel"))))}}]),e}(a.PureComponent),Kt={closeModal:dt},zt=Object(J.connect)(null,Kt)(Bt),Gt=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).closeModal=function(){n.props.closeModal()},n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"shouldComponentUpdate",value:function(t){return Object.keys(t.modals).length!==Object.keys(this.props.modals).length}},{key:"render",value:function(){var t=this;return console.log("Modals Rendered"),this.props.modals.addModal?r.a.createElement(Dt,{isOpen:!0,closeModal:this.closeModal}):this.props.modals.deleteListModal?r.a.createElement(Ht,{isOpen:!0,closeModal:this.closeModal,data:this.props.modals.data.name,onDelete:function(){return t.props.deleteList(t.props.modals.data.id,t.props.socket)}}):this.props.modals.editListModal?r.a.createElement(zt,{isOpen:!0,closeModal:this.closeModal,data:this.props.modals.data.name,onEdit:function(e){return t.props.updateList(t.props.modals.data.id,e,t.props.socket)}}):r.a.createElement(r.a.Fragment,null)}}]),e}(a.Component),Vt={closeModal:dt,deleteList:function(t,e){return function(){var n=Object(q.a)(W.a.mark(function n(a){return W.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",mt(t).then(function(t){t&&(a({type:E,data:t}),e&&e.emit("updating","list"))}).catch(function(t){console.log(t)}));case 1:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()},updateList:function(t,e,n){return function(){var a=Object(q.a)(W.a.mark(function a(r){return W.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",bt(t,e).then(function(t){t&&(r({type:y,data:t}),n&&n.emit("updating","list"))}).catch(function(t){console.log(t)}));case 1:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}()}},Zt=Object(J.connect)(function(t){return{modals:t.modals,lists:t.lists,socket:t.socket}},Vt)(Gt),Wt=function(t){return r.a.createElement("div",{className:"titlebar--div-container"},r.a.createElement("div",{className:"titlebar--div-buttongroup"},r.a.createElement("button",{type:"button",className:"active"===t.visibility?"titlebar--button-selected":"titlebar--button",onClick:function(){return t.onUpdate("active")}},"Active"),r.a.createElement("button",{type:"button",className:"completed"===t.visibility?"titlebar--button-selected":"titlebar--button",onClick:function(){return t.onUpdate("completed")}},"Completed")))},qt=function(t){return fetch("/api/tasks/".concat(t)).then(function(){var t=Object(q.a)(W.a.mark(function t(e){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=4;break}return t.abrupt("return",e.json());case 4:throw new Error("An Error occured with the API");case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},Yt=function(t,e){return fetch("/api/tasks/create",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({listId:t,name:e})}).then(function(t){if(t.ok)return t.json();throw new Error("An Error occured with the API")})},Qt=function(t,e){return fetch("/api/tasks/toggle",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({taskId:t,isCompleted:e})}).then(function(t){if(t.ok)return t.json();throw new Error("An Error occured with the API")})},Xt=function(t,e){return fetch("/api/tasks/reorderTasks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({tasks:t})}).then(function(t){return e&&e.emit("updating","tasks"),t.ok?t.json():void 0})},$t=function(t){return fetch("/api/tasks/single/".concat(t)).then(function(){var t=Object(q.a)(W.a.mark(function t(e){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=4;break}return t.abrupt("return",e.json());case 4:throw new Error("An Error occured with the API");case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},te=function(t,e){return fetch("/api/tasks/updateTaskTitle",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t,name:e})}).then(function(t){if(t.ok)return t.json();throw new Error("An Error occured with the API")})},ee=function(t){return fetch("/api/tasks/",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t})}).then(function(t){if(t.ok)return"Deleted"})},ne=n(99),ae=n.n(ne),re=function(t){return"active"===t.visibility?r.a.createElement("div",{className:"TaskAdd--div-container"},r.a.createElement("form",{onSubmit:function(e){return t.onSubmit(e)}},r.a.createElement("input",{type:"text",ref:t.inputRef,placeholder:"Add a new task here"}))):r.a.createElement("div",{className:"TaskAdd--div-container-completed"},r.a.createElement("button",{onClick:function(){return t.onClear()}},"Clear Completed"))},se=function(t){function e(){return Object(F.a)(this,e),Object(K.a)(this,Object(z.a)(e).apply(this,arguments))}return Object(G.a)(e,t),Object(B.a)(e,[{key:"toggleTasks",value:function(){this.props.toggleTask(this.props.item.id,!this.props.item.isCompleted,this.props.socket)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"Task--div-container"},r.a.createElement("input",{type:"checkbox",checked:this.props.item.isCompleted,onChange:function(){return t.toggleTasks()}}),r.a.createElement("span",null,this.props.item.name),r.a.createElement(o.b,{to:"/task/edit/".concat(this.props.item.id),className:"fas fa-edit Task--div-editLink"}))}}]),e}(a.Component),oe={toggleTask:function(t,e,n){return function(){var a=Object(q.a)(W.a.mark(function a(r){return W.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Qt(t,e).then(function(t){t&&(r({type:j,data:t}),n&&n.emit("updating","tasks"))});case 2:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}()}},ie=Object(J.connect)(function(t){return{socket:t.socket}},oe)(se),ce=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).state={listId:""},n.updateTasksOrder=function(t){if(t.destination){var e=yt(n.visibleTasks(),t.source.index,t.destination.index);n.props.reorderTasks(e,n.props.visibility),n._reorderTask(e)}},n._reorderTask=gt()(function(t){Xt(t,n.props.socket)},2e3),n.visibleTasks=function(){return"active"===n.props.visibility?n.props.tasks.activeTasks:n.props.tasks.completedTasks},n.addNewTask=function(t){t.preventDefault();var e=n.newTask.value;return""!==e&&void 0!==e&&null!==e&&e.match(/[a-zA-Z0-9]/g)?e.length>255?rt.b.warn("Sorry, please don't type in a paragraph. Max 255 characters."):(rt.b.success("".concat(e," has been added successfully.")),n.props.addTask(n.props.listId,e,n.props.socket),void(n.newTask.value="")):rt.b.warn("Nothing is entered. Please try again.")},n.clearCompletedTasks=function(){window.confirm("This will permanent clear all completed task in this list, are you sure?")&&n.props.clearCompletedTasks(n.props.listId,n.props.socket)},n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.getTasks(this.props.listId),this.props.socket&&this.props.socket.on("tasks",function(){return t.props.getTasks(t.props.listId)})}},{key:"componentWillUnmount",value:function(){this.props.socket&&this.props.socket.off("tasks")}},{key:"shouldComponentUpdate",value:function(t){return!ae()(t.tasks,this.props.tasks)||this.props.visibility!==t.visibility||t.listId!==this.props.listId}},{key:"componentDidUpdate",value:function(){this.state.listId!==this.props.listId&&(this.props.getTasks(this.props.listId),this.setState({listId:this.props.listId}))}},{key:"render",value:function(){var t=this;return console.log(this.props.tasks),r.a.createElement("div",null,r.a.createElement(ut.a,{onDragEnd:this.updateTasksOrder},r.a.createElement(ut.c,{droppableId:"droppableTasks"},function(e){return r.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,className:"Droppable--div-tasksContainer"}),r.a.createElement(re,{onClear:function(){return t.clearCompletedTasks()},onSubmit:t.addNewTask,inputRef:function(e){return t.newTask=e},visibility:t.props.visibility}),t.visibleTasks().map(function(e,n){return r.a.createElement(ut.b,{key:e,index:n,draggableId:e},function(n){return r.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps),r.a.createElement(ie,{item:t.props.tasks.keyHash[e]}))})}),e.placeholder)})))}}]),e}(a.Component),ue={getTasks:function(t){return function(){var e=Object(q.a)(W.a.mark(function e(n){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt(t).then(function(t){t&&n({type:g,data:t})});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},addTask:function(t,e,n){return function(){var a=Object(q.a)(W.a.mark(function a(r){return W.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Yt(t,e).then(function(t){t&&(r({type:O,data:t}),n&&n.emit("updating","tasks"))});case 2:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}()},clearCompletedTasks:function(t,e){return function(){var n=Object(q.a)(W.a.mark(function n(a){return W.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(r=t,fetch("/api/list/clearCompletedTasks",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({ListId:r})}).then(function(t){return t.ok?t.json():void 0})).then(function(t){t&&(a({type:w,data:t}),e&&e.emit("updating","tasks"))}));case 1:case"end":return n.stop()}var r},n)}));return function(t){return n.apply(this,arguments)}}()},reorderTasks:function(t,e){return function(){var n=Object(q.a)(W.a.mark(function n(a){return W.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a("active"===e?{type:"UPDATE_ACTIVE_TASK_ORDER",data:t}:{type:"UPDATE_COMPLETED_TASK_ORDER",data:t});case 1:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()}},le=Object(J.connect)(function(t){return{visibility:t.visibility,tasks:t.tasks,socket:t.socket}},ue)(ce),pe=function(t){function e(){return Object(F.a)(this,e),Object(K.a)(this,Object(z.a)(e).apply(this,arguments))}return Object(G.a)(e,t),Object(B.a)(e,[{key:"componentDidMount",value:function(){this.props.toggleMenu(!1)}},{key:"shouldComponentUpdate",value:function(t){return!t.lists.keyHash[t.match.params.id]||t.match.params.id!==this.props.match.params.id||t.visibility!==this.props.visibility}},{key:"componentDidUpdate",value:function(){this.props.toggleMenu(!1)}},{key:"render",value:function(){var t=this;return this.props.lists.keyHash[this.props.match.params.id]?r.a.createElement("div",{className:"task--div-full-container"},r.a.createElement(Wt,{name:this.props.lists.keyHash[this.props.match.params.id].name,visibility:this.props.visibility,onUpdate:function(e){return t.props.updateVisibility(e)}}),r.a.createElement(le,{listId:this.props.match.params.id})):r.a.createElement(V.a,{to:"/NotFound"})}}]),e}(a.Component),de={updateVisibility:kt,toggleMenu:P.action},fe=Object(J.connect)(function(t){return{visibility:t.visibility,lists:t.lists}},de)(pe),he=function(t,e){return fetch("/api/subtasks/create",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({taskId:t,name:e})}).then(function(t){if(t.ok)return t.json();throw new Error("An Error occured with the API")})},me=function(t,e){return fetch("/api/subtasks/update",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t,name:e})}).then(function(t){if(t.ok)return t.json();throw new Error("An Error occured with the API")})},be=function(t){return fetch("/api/subtasks/",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t})}).then(function(t){if(t.ok)return t.json();throw new Error("An Error occured with the API")})},ke=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).updateSubtask=function(t){t.preventDefault();var e=n.refs[n.props.item.id].value;return 0!==e.length&&null!==e&&void 0!==e&&e.match(/[a-zA-Z0-9]/g)?e.length>255?rt.b.warn("Must be between 1-255 characters long."):(n.props.updateSubtask(n.props.item.id,e,n.props.socket),void rt.b.success("".concat(n.props.item.name,' has been renamed to "').concat(e,'".'))):rt.b.warn("Task title cannot be empty.")},n.deleteSubtask=function(){window.confirm('Delete "'.concat(n.props.item.name,'"?'))&&(n.props.deleteSubtask(n.props.item.id,n.props.item.TaskId,n.props.socket),rt.b.success("".concat(n.props.item.name," has been deleted.")))},n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"Subtask--div-container"},r.a.createElement("form",{onSubmit:function(e){return t.updateSubtask(e)}},r.a.createElement("input",{type:"text",defaultValue:this.props.item.name,ref:this.props.item.id})),r.a.createElement("button",{onClick:function(){return t.deleteSubtask()},className:"fas fa-trash"}))}}]),e}(a.Component),ve={updateSubtask:function(t,e,n){return function(){var a=Object(q.a)(W.a.mark(function a(r){return W.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",me(t,e).then(function(t){t&&n&&n.emit("updating","tasks")}));case 1:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}()},deleteSubtask:function(t,e,n){return function(){var a=Object(q.a)(W.a.mark(function a(r){return W.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",be(t).then(function(a){a&&(r({type:C,data:{id:t,taskId:e}}),n&&n.emit("updating","tasks"))}));case 1:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}()}},ye=Object(J.connect)(function(t){return{socket:t.socket}},ve)(ke),Ee=function(t){function e(){var t,n;Object(F.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(K.a)(this,(t=Object(z.a)(e)).call.apply(t,[this].concat(r)))).updateTaskTitle=function(t){t.preventDefault();var e=n.refs.taskTitle.value;return 0!==e.length&&null!==e&&void 0!==e&&e.match(/[a-zA-Z0-9]/g)?e.length>255?rt.b.warn("Must be between 1-255 characters long."):(n.props.updateTaskTitle(n.props.match.params.id,e),void rt.b.success("Updated task title to ".concat(e))):rt.b.warn("Task title cannot be empty.")},n.addNewSubtask=function(t){t.preventDefault();var e=n.refs.addNewSubtask.value;0!==e.length&&null!==e&&void 0!==e&&e.match(/[a-zA-Z0-9]/g)&&(e.length>255&&rt.b.warn("Must be between 1-255 characters long."),n.props.addNewSubtask(n.props.match.params.id,e),rt.b.success("".concat(e," has been added successfully.")),n.refs.addNewSubtask.value="")},n.deleteTask=Object(q.a)(W.a.mark(function t(){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Deleting this task will also delete all its subtasks, are you sure?")){t.next=5;break}return t.next=4,n.props.deleteTask(n.props.match.params.id);case 4:n.props.history.push("/list/".concat(n.props.tasks.keyHash[n.props.match.params.id].ListId));case 5:case"end":return t.stop()}},t)})),n}return Object(G.a)(e,t),Object(B.a)(e,[{key:"componentDidMount",value:function(){var t=Object(q.a)(W.a.mark(function t(){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.beginApiCall(),this.props.tasks.keyHash[this.props.match.params.id]){t.next=4;break}return t.next=4,this.props.getTask(this.props.match.params.id);case 4:this.props.endApiCall();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;if(this.props.apiStatus.isLoading)return r.a.createElement("div",null,"Loading");var e=this.props.tasks.keyHash[this.props.match.params.id];return e?r.a.createElement("div",{className:"Edit--div-container"},r.a.createElement("div",{className:"Edit--div-top-level-edit"},r.a.createElement(o.b,{to:"/list/".concat(e.ListId)},r.a.createElement("i",{className:"fas fa-arrow-left"})," Back"),r.a.createElement("button",{onClick:function(){return t.deleteTask()}},"Delete ",r.a.createElement("i",{className:"fas fa-trash"}))),r.a.createElement("form",{onSubmit:function(e){return t.updateTaskTitle(e)}},r.a.createElement("input",{className:"Edit--input-task",type:"text",defaultValue:e.name,ref:"taskTitle"})),r.a.createElement("form",{onSubmit:function(e){return t.addNewSubtask(e)}},r.a.createElement("input",{className:"Edit--input-subtask",type:"text",placeholder:"Add a subtask here",ref:"addNewSubtask"})),e.subtasks.keyOrder.map(function(t){return r.a.createElement(ye,{key:t,item:e.subtasks.keyHash[t]})})):r.a.createElement(V.a,{to:"/NotFound"})}}]),e}(a.Component),ge={beginApiCall:function(){return{type:l}},getTask:function(t){return function(){var e=Object(q.a)(W.a.mark(function e(n){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t(t).then(function(t){t&&n({type:O,data:t})});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},endApiCall:function(){return{type:p}},addNewSubtask:function(t,e,n){return function(){var a=Object(q.a)(W.a.mark(function a(r){return W.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",he(t,e).then(function(t){t&&(r({type:T,data:t}),n&&n.emit("updating","tasks"))}));case 1:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}()},updateTaskTitle:function(t,e,n){return function(){var a=Object(q.a)(W.a.mark(function a(r){return W.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",te(t,e).then(function(t){t&&n&&n.emit("updating","tasks")}));case 1:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}()},deleteTask:function(t,e){return function(){var n=Object(q.a)(W.a.mark(function n(a){return W.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",ee(t).then(function(t){t&&e&&e.emit("updating","tasks")}));case 1:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()}},Oe=Object(J.connect)(function(t){return{tasks:t.tasks,apiStatus:t.apiStatus}},ge)(Ee),je=function(t){function e(){return Object(F.a)(this,e),Object(K.a)(this,Object(z.a)(e).apply(this,arguments))}return Object(G.a)(e,t),Object(B.a)(e,[{key:"render",value:function(){return console.log("Main router Rendered"),r.a.createElement(V.d,null,r.a.createElement(V.b,{exact:!0,path:"/",render:function(){return r.a.createElement("div",null,"MAIN")}}),r.a.createElement(V.b,{path:"/list/:id",component:fe}),r.a.createElement(V.b,{path:"/task/edit/:id",render:function(t){return r.a.createElement(Oe,Object.assign({key:t.match.params.id},t))}}),r.a.createElement(V.b,{component:at}))}}]),e}(a.PureComponent);Nt.a.setAppElement("#root");var we,Te=function(t){function e(){return Object(F.a)(this,e),Object(K.a)(this,Object(z.a)(e).apply(this,arguments))}return Object(G.a)(e,t),Object(B.a)(e,[{key:"render",value:function(){return console.log("App Rendered"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Zt,null),r.a.createElement(ot,null),r.a.createElement("div",{id:"outer-container"},r.a.createElement(St,null),r.a.createElement(je,null)),r.a.createElement(rt.a,{autoClose:2e3,hideProgressBar:!0}))}}]),e}(a.Component),Ce=Object(J.connect)(function(t){return{auth:t.auth}},{})(Te),Se=n(100),Ae=n.n(Se),Ne=function(t){function e(){return Object(F.a)(this,e),Object(K.a)(this,Object(z.a)(e).apply(this,arguments))}return Object(G.a)(e,t),Object(B.a)(e,[{key:"componentWillMount",value:function(){this.props.getUserAndLists()}},{key:"shouldComponentUpdate",value:function(t){return t.auth.isLoading!==this.props.auth.isLoading}},{key:"render",value:function(){return this.props.auth.isLoading?(console.log("Loading Screen"),r.a.createElement($,null)):!this.props.auth.isLoading&&this.props.auth.id?(console.log("Entry Rendered"),this.props.addSocketToApp(function(t){var e=Ae()();return e.on("connect",function(){return e.emit("join","".concat(t))}),e}(this.props.auth.id)),r.a.createElement(Ce,null)):this.props.auth.isLoading||this.props.auth.id?void 0:r.a.createElement(V.d,null,r.a.createElement(V.b,{exact:!0,path:"/",component:nt}),r.a.createElement(V.b,{component:at}))}}]),e}(a.Component),Le={getUserAndLists:function(){return function(){var t=Object(q.a)(W.a.mark(function t(e){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Y().then(function(t){t&&e({type:k,data:t.lists}),delete t.lists,e({type:f,data:t})}).catch(function(){e({type:d})}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},addSocketToApp:function(t){return function(){var e=Object(q.a)(W.a.mark(function e(n){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n({type:h,data:t});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},xe=Object(J.connect)(function(t){return{auth:t.auth}},Le)(Ne),Me=Object(i.e)(R,we,Object(i.a)(H.a));Object(s.render)(r.a.createElement(J.Provider,{store:Me},r.a.createElement(o.a,null,r.a.createElement(xe,null))),document.getElementById("root"))},90:function(t,e,n){t.exports=n.p+"static/media/loading.ec9b161c.gif"},91:function(t,e,n){t.exports=n.p+"static/media/bean.2ff32ac4.png"}},[[103,1,2]]]);
//# sourceMappingURL=main.d36fc5ea.chunk.js.map